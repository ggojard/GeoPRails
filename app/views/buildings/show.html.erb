<div ng-controller="BuildingCtrl">
  <div ng-repeat="buildingId in buildings">
    <div ng-show="loading" class="loading"><img alt="chargement..."></div>
    <div ng-show="!loading">
      <div class="jumbotron" style="background-color: {{bgColor[buildingId]}}"><h2>{{building.name}}</h2></div>
      

        
      <%= render '/buildings/display_floors' %>
      <%= render '/floors/filters' %>
      <%= render '/floors/charts' %>      
      <%= render '/floors/display_text' %>
      <%= render '/floors/map_editor' %>
      <div class="panel panel-default">
        <div class="panel-heading"  style="background-color: {{bgColor[buildingId]}}">
          <h3 class="panel-title">Opérations</h3>
        </div>
        <div class="panel-body">
          <ul>
            <li><a href="{{building.url}}/duplicate">Dupliquer le bâtiment</a></li>
            <li><a href="{{building.url}}/export">Exporter le bâtiment</a></li>
          </ul>
        </div>
      </div>

      <div class="panel panel-danger">
        <div class="panel-heading">
          <h3 class="panel-title">Zone de danger</h3>
        </div>
        <div class="panel-body">
          <ul>
            <li><a ng-click="deleteBuilding(buildingId)" href="#">Supprimer ce bâtiment et l'ensemble des étages et pièces associés</a></li>
          </ul>
        </div>
      </div>

      <%= render '/floors/room' %>
    </div>
  </div>
</div>
